<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/layout/template.xhtml">

	<ui:define name="head">
	</ui:define>

	<ui:define name="body">
		<form id="mainForm" name="mainForm" method="post" action="#{request.contextPath}/FileUploadServlet" class="edit" enctype="multipart/form-data">
			<input type="hidden" name="client_info" value="大半夜发起请求！" />
			<input value="上傳" type="submit" />
			<div class="blank-div">
				<input type="file" id="file_selector" name="selected_files" multiple="multiple" style="width: 0;height: 0;" />
				<img id="touch_file_selector" src="../images/icon_add_96x96.png" style="width: 96px;height: 96px;" />
			</div>
			<div id="debug">
				<label id="showInfo" />
			</div>
		</form>
		<script type="text/javascript">
		//<![CDATA[
			jQuery(document).ready(function() {
			    jQuery('body').niceScroll({
					cursorcolor : '#4CAE4C',
					cursorwidth : 6,
					cursoropacitymax : 0.8,
					touchbehavior : false,
					autohidemode : true
			    });

			    jQuery('#touch_file_selector').click(function(){
					jQuery('#file_selector').click();
					jQuery('#showInfo').html('打開選擇文件的對話框！');
				});
				
			    jQuery('#file_selector').change(function(){
			    	jQuery('#showInfo').html('');
					var files = this.files;
					for (var i = 0; i < files.length; i++) {
					    var file = files[i];
					    blob = window.URL.createObjectURL(file);
					    //new Audio(blob).play();
					    jQuery('#debug').append(___wrapStr('文件名：' + file.name,'尺寸：' + file.size) + '<br/>');
					    jQuery('#debug').append('<img src="' + blob + '" width="64" height="64" /><br/>');
					}
				});
			});

		//]]>
		</script>
	</ui:define>
</ui:composition>
